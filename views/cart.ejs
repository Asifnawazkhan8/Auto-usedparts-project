<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Tool Store</title>
	<link href="/css/bootstrap.min.css" rel="stylesheet">
	<link href="/css/global.css" rel="stylesheet">
	<link href="/css/cart.css" rel="stylesheet">
	<link rel="stylesheet" type="text/css" href="/css/font-awesome.min.css" />
	<link href="https://fonts.googleapis.com/css2?family=Baloo+2&display=swap" rel="stylesheet">
	<script src="js/jquery-2.1.1.min.js"></script>
    <script src="js/bootstrap.min.js"></script>

<%- include('common/header');%>
<section id="center" class="clearfix center_shop">
    <div class="container">
     <div class="row">
       <div class="center_shop_1 clearfix">
        <div class="col-sm-6">
         <div class="center_shop_1l clearfix">
          <h3 class="mgt">Shopping Cart</h3>
         </div>
        </div>
        <div class="col-sm-6">
         <div class="center_shop_1r text-right clearfix">
          <h5><a class="col_2" href="/">Home</a> / <span>Shopping Cart</span></h5>
         </div>
        </div>
       </div>
     </div>
    </div>
    </section>
    
    <section id="cart_page" class="clearfix cart">
     <div class="container">
      <div class="row">
        <div class="cart_1 clearfix">
         <div class="col-sm-12">
          <p class="mgt"><a href="/">Home</a> / <span>Shopping Cart</span></p>
         </div>
        </div>
        <div class="cart_2 clearfix">
         <div class="col-sm-6">
          <h3 class="bold col_1">MY CART</h3>
         </div>
         <div class="col-sm-6">
          <h5 class="text-right"><a href="/all-products">Continue Shopping</a></h5>
         </div>
        </div>
        <div class="cart_3 clearfix">
         <div id="cartShowList" class="col-sm-8">
          <div class="cart_3l clearfix"><h5 class="mgt">PRODUCT</h5></div>
         </div>
         <div class="col-sm-4">
          <div class="cart_3r clearfix">
           <h5 class="mgt head_1">SUBTOTAL</h5>
           <h3 id="subTotal" class="text-center">$1,347.00</h3>
           <hr>
           <h6>Additional comments</h6>
           <textarea class="form-control"></textarea>
           <h5 class="text-center"><a class="button" href="checkout.html">PROCEED TO CHECKOUT</a></h5><br>
           <h5>GET SHIPPING ESTIMATES</h5>
           <hr>
          </div>
          <div class="cart_3r1 clearfix">
            <h6>Country</h6>
           <select class="form-control" id="subject" name="subject">
            <option>America</option>
            <option>India</option>
            <option>England</option>
            <option>Africa</option>
            </select><br>
            <h6>State</h6>
           <select class="form-control" id="subject" name="subject">
            <option>Delhi</option>
            <option>Uttar Pradesh</option>
            <option>Punjab</option>
            <option>Madhya Pradesh</option>
            </select><br>
          <h6>Postal/Zip Code</h6>
           <input class="form-control" type="text">
           <h5 class="text-center"><a class="button_1" href="#">CALCULATE SHIPPING</a></h5>
           </div>
         </div>
        </div>
      </div>
     </div>	 
    </section>
    <script>
      $(document).ready(function(){
        /*****Fixed Menu******/
        var secondaryNav = $('.cd-secondary-nav'),
           secondaryNavTopPosition = secondaryNav.offset().top;
          $(window).on('scroll', function(){
            if($(window).scrollTop() > secondaryNavTopPosition ) {
              secondaryNav.addClass('is-fixed');	
            } else {
              secondaryNav.removeClass('is-fixed');
            }
          });	
          
      });
      </script>
      
      <script>
        $(document).on('click', '.number-spinner button', function () {    
        var btn = $(this),
          oldValue = btn.closest('.number-spinner').find('input').val().trim(),
          newVal = 0;
        
        if (btn.attr('data-dir') == 'up') {
          newVal = parseInt(oldValue) + 1;
        } else {
          if (oldValue > 1) {
            newVal = parseInt(oldValue) - 1;
          } else {
            newVal = 1;
          }
        }
        btn.closest('.number-spinner').find('input').val(newVal);
      });
        </script>
        <script>
          function cartShowList(){
          let cartShowList = document.querySelector('#cartShowList');
          const cartItemsString = localStorage.getItem('cart');
          if(cartItemsString){
            const cartItems = JSON.parse(cartItemsString);
            if(cartItems.length !== 0){
              let totalAmount = 0;
              cartItems.forEach(item => {
                let cartItem = document.createElement('div');
                cartItem.classList.add('cart_3l1', 'clearfix');
                cartItem.innerHTML = `<div class="col-sm-3 space_left"><div class="cart_3l1i clearfix"><a href="/all-products"><img src="${item.url}" alt="abc" class="iw"></a></div></div>
                <div class="col-sm-9"><div class="cart_3l1i1 clearfix"><h5 class="mgt"><a href="/all-products">${item.name}</a></h5>
                <h5 class="normal">RED / XS</h5><h6>Vendor</h6><h4>AED ${item.price}</h4><h5>Quantity</h5></div><div class="cart_3l1i2 clearfix"><div class="input-group number-spinner">
                <span class="input-group-btn"><button class="btn btn-default" data-dir="dwn"><span class="glyphicon glyphicon-minus"></span></button></span>
                <input type="text" class="form-control text-center" value="${item.qty}"><span class="input-group-btn">
                <button class="btn btn-default" data-dir="up"><span class="glyphicon glyphicon-plus"></span></button></span></div>
                <h6 class="mgt"><a class="button_1 mgt" href="#">REMOVE</a></h6>
                <h6 class="mgt"><a class="button mgt" href="#">UPDATE CART</a></h6></div></div>`;
                cartShowList.appendChild(cartItem);
                totalAmount += (parseFloat(item.qty) * parseFloat(item.price))
              })
              let subTotal = document.querySelector('#subTotal');
              subTotal.innerHTML = 'AED '+ totalAmount;
            }else{
            let cartPage = document.querySelector('#cart_page');
            cartPage.innerHTML = '<p style="color: #ea1c26;text-align: center;font-weight: 900;font-size: 100px;">Cart is Empty</P>'
          }
          }else{
            let cartPage = document.querySelector('#cart_page');
            cartPage.innerHTML = '<p style="color: #ea1c26;text-align: center;font-weight: 900;font-size: 100px;">Cart is Empty</P>'
          }
          console.log(cartShowList)
        }
        cartShowList()
        </script>      

    <%- include('common/footer');%>
</body>

</html>
